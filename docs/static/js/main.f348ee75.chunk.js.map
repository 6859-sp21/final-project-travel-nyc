{"version":3,"sources":["components/Legend.js","components/Map.js","components/keys.js","stations.js","list_stations.js","components/taxis.csv","components/RangeInput.js","components/WelcomeModal.js","components/MapWrapper.js","App.js","reportWebVitals.js","index.js"],"names":["Legend","counts","resetFilter","resetView","brushing","setBrushing","aggregate","setAggregate","setBrushRadius","brushRadius","pickupAgg","setPickupAgg","arcType","setArcType","useState","setPrintCount","useEffect","toFixed","PositionContainer","styled","position","zIndex","top","left","width","CenterContainer","color","borderColor","padding","height","display","flexDirection","justifyContent","alignItems","background","borderRadius","classes","fontSize","marginTop","marginBottom","marginLeft","marginRight","fontWeight","makeStyles","theme","modal","paper","border","spacing","useStyles","React","open","setOpen","localRadius","setLocalRadius","Button","variant","disableElevation","onClick","ButtonGroup","Slider","value","onChange","event","newValue","console","log","step","min","max","valueLabelDisplay","aria-labelledby","IconButton","Modal","aria-describedby","className","onClose","closeAfterTransition","BackdropComponent","Backdrop","BackdropProps","timeout","Fade","in","id","Map","viewState","onViewStateChange","stations","trips","time_filter","loading","isPlaying","setHighlight","initCounters","zeros","forEach","s","filterTrips","filter","element","start_minutes","brushingExtension","BrushingExtension","red","green","undefined","highlightCount","filteredTrips","setFilteredTrips","setpickupAgg","layers","HexagonLayer","data","elevationRange","elevationScale","extruded","opacity","visible","radius","coverage","pickable","getPosition","d","start_position","autoHighlight","length","end_position","ScatterplotLayer","getFillColor","getRadius","brushingRadius","brushingEnabled","extensions","ArcLayer","getSourcePosition","getTargetPosition","getSourceColor","getTargetColor","updateTriggers","mapboxApiAccessToken","mapStyle","getTooltip","object","lat","lng","count","points","mapboxgl","workerClass","require","default","station_info","3186","name","latitude","longitude","3195","3199","3792","3185","3275","3639","3276","3202","3211","3213","3640","3187","3203","3207","3678","3194","3206","3225","3220","3196","3272","3269","3638","3278","3273","3279","3270","3205","3209","3267","3212","3184","3681","3679","3483","3280","3214","3791","3481","3193","3677","3268","3281","3210","3201","3694","3192","3198","3277","3191","3426","list_stations","bottom","SliderInput","withStyles","root","valueLabel","RangeInput","formatLabel","lock","setLock","span","setSpan","localOnChange","updateValue","Typography","valueLabelFormat","title","WelcomeModal","CircularProgress","nyc","zoom","pitch","bearing","MapWrapper","props","setViewState","setState","setFilter","handleFlyTo","highlightStation","t","hour","Math","floor","slice","minutes","handleChangeViewState","destination","state","transitionDuration","transitionInterpolator","FlyToInterpolator","togglePlaying","playing","csv","trip_data","pickup_time","Date","dropoff_time","taxi_type","duration","distance","passenger_count","start_time","toTimeString","getHours","getMinutes","fare_amount","tip_amount","total_amount","then","filter_data","this","toggle","animationSpeed","Component","App","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.f348ee75.chunk.js","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { styled, makeStyles } from \"@material-ui/core/styles\";\nimport Button from \"@material-ui/core/Button\";\nimport Modal from \"@material-ui/core/Modal\";\nimport Backdrop from \"@material-ui/core/Backdrop\";\nimport Fade from \"@material-ui/core/Fade\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport IconHelp from \"@material-ui/icons/Help\";\nimport Slider from \"@material-ui/core/Slider\";\nimport { ThemeProvider } from \"@material-ui/styles\";\nimport { ButtonGroup } from \"@material-ui/core\";\n\nexport default function Legend({\n  counts,\n  resetFilter,\n  resetView,\n  brushing,\n  setBrushing,\n  aggregate,\n  setAggregate,\n  brushRadius,\n  setBrushRadius,\n  pickupAgg,\n  setPickupAgg,\n  arcType,\n  setArcType,\n}) {\n  const [printCount, setPrintCount] = useState(0);\n  useEffect(() => {\n    setPrintCount(((counts / 75960) * 100).toFixed(2));\n  }, [counts]);\n\n  const PositionContainer = styled(\"div\")({\n    position: \"absolute\",\n    zIndex: 1,\n    top: \"2em\",\n    left: \"2em\",\n    width: \"40%\",\n  });\n\n  const CenterContainer = styled(\"div\")({\n    color: \"#dddddd\",\n    borderColor: \"rgb(72,72,72)\",\n    padding: \"1em\",\n    position: \"\",\n    zIndex: 1,\n    height: \"100%\",\n    width: \"60%\",\n    display: \"flex\",\n    flexDirection: \"column\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    background: \"rgb(48,48,48)\",\n    borderRadius: \"10px\",\n  });\n\n  const TextContainer = styled(\"div\")({\n    color: \"#dddddd\",\n    display: \"block\",\n    fontSize: \"1.2em\",\n    marginTop: \"0.25em\",\n    marginBottom: \"0.83em\",\n    marginLeft: 0,\n    marginRight: 0,\n    fontWeight: \"bold\",\n  });\n\n  const useStyles = makeStyles((theme) => ({\n    modal: {\n      display: \"flex\",\n      alignItems: \"center\",\n      justifyContent: \"center\",\n    },\n    paper: {\n      color: \"#dddddd\",\n      background: \"rgb(48,48,48)\",\n      border: \"0px solid #000\",\n      padding: theme.spacing(2, 4, 3),\n    },\n  }));\n\n  const classes = useStyles();\n  const [open, setOpen] = React.useState(false);\n\n  const handleOpen = () => {\n    setOpen(true);\n  };\n\n  const handleClose = () => {\n    setOpen(false);\n  };\n\n  const toggleBrush = () => {\n    setBrushing(!brushing);\n    setAggregate(false);\n  };\n\n  const toggleAgg = () => {\n    setAggregate(!aggregate);\n    setBrushing(false);\n  };\n\n  const [localRadius, setLocalRadius] = React.useState(100);\n\n  const handleBrushRadius = (event, newValue) => {\n    console.log(newValue);\n    setLocalRadius(newValue);\n    setBrushRadius(newValue);\n  };\n\n  return (\n    <div>\n      <PositionContainer>\n        <CenterContainer>\n          {/* <TextContainer>Percent of trips during this time</TextContainer>\n          <TextContainer>{printCount}%</TextContainer> */}\n          <div>\n            <Button\n              variant=\"contained\"\n              disableElevation\n              onClick={toggleBrush}\n              color=\"primary\"\n            >\n              Toggle brushing\n            </Button>\n            {brushing ? (\n              <div>\n                <div>Brushing Arc Target</div>\n                <ButtonGroup>\n                  <Button\n                    variant=\"contained\"\n                    disableElevation\n                    onClick={() => setArcType(\"source\")}\n                    color={arcType == \"source\" ? \"\" : \"primary\"}\n                  >\n                    Pickups\n                  </Button>\n                  <Button\n                    variant=\"contained\"\n                    disableElevation\n                    onClick={() => setArcType(\"target\")}\n                    color={arcType == \"target\" ? \"\" : \"primary\"}\n                  >\n                    Dropoffs\n                  </Button>\n                  <Button\n                    variant=\"contained\"\n                    disableElevation\n                    onClick={() => setArcType(\"source_target\")}\n                    color={arcType == \"source_target\" ? \"\" : \"primary\"}\n                  >\n                    Both\n                  </Button>\n                </ButtonGroup>\n\n                <div>Brush Radius</div>\n                <Slider\n                  value={localRadius}\n                  onChange={handleBrushRadius}\n                  step={10}\n                  min={50}\n                  max={400}\n                  valueLabelDisplay=\"auto\"\n                  aria-labelledby=\"continuous-slider\"\n                />\n              </div>\n            ) : (\n              <div />\n            )}\n\n            <Button\n              variant=\"contained\"\n              disableElevation\n              onClick={toggleAgg}\n              color=\"primary\"\n            >\n              Toggle aggregation\n            </Button>\n            {aggregate ? (\n              <div>\n                Aggregate by Event:\n                <ButtonGroup>\n                  <Button\n                    variant=\"contained\"\n                    disableElevation\n                    onClick={() => setPickupAgg(true)}\n                    color={pickupAgg ? \"\" : \"primary\"}\n                  >\n                    Pickup\n                  </Button>\n                  <Button\n                    variant=\"contained\"\n                    disableElevation\n                    onClick={() => setPickupAgg(false)}\n                    color={pickupAgg ? \"primary\" : \"\"}\n                  >\n                    Dropoff\n                  </Button>\n                </ButtonGroup>\n              </div>\n            ) : (\n              <div />\n            )}\n\n            <Button\n              variant=\"contained\"\n              disableElevation\n              onClick={resetFilter}\n              color=\"primary\"\n            >\n              Reset Time Filter\n            </Button>\n            <Button\n              variant=\"contained\"\n              disableElevation\n              onClick={resetView}\n              color=\"primary\"\n            >\n              Reset View\n            </Button>\n            <IconButton\n              variant=\"contained\"\n              disableElevation\n              onClick={handleOpen}\n              color=\"secondary\"\n            >\n              <IconHelp />\n            </IconButton>\n          </div>\n        </CenterContainer>\n      </PositionContainer>\n      <div>\n        <Modal\n          aria-labelledby=\"transition-modal-title\"\n          aria-describedby=\"transition-modal-description\"\n          className={classes.modal}\n          open={open}\n          onClose={handleClose}\n          closeAfterTransition\n          BackdropComponent={Backdrop}\n          BackdropProps={{\n            timeout: 500,\n          }}\n        >\n          <Fade in={open}>\n            <div className={classes.paper}>\n              <h2 id=\"transition-modal-title\">Help:</h2>\n              <ul>\n                <li>\n                  The map displays where New Yrok City Taxis picked up and\n                  dropped off passengers during the first few months of the\n                  COVID pandemic.\n                </li>\n                <li>\n                  Green Represents a pickup location and red means a dropoff\n                  location.\n                </li>\n                <p></p>\n                <li>\n                  Enabling brushing allows for the specific trips to be\n                  highlighted.\n                </li>\n                <li>\n                  The brushing can filter the trips with pickups, dropoffs, or\n                  both inside the radius.\n                </li>\n                <li>The radius of the brush can be changed via the slider.</li>\n                <p></p>\n                <li>\n                  An aggregate view of the data can be enabled to show\n                  aggregation of where pickup and dropoff locations are.\n                </li>\n                <p></p>\n                <li>\n                  The time filter can be adjusted to view how trip locations\n                  change over time.\n                </li>\n                <li>The lock icon toggles the fixed/free filter size.</li>\n                <li>The filter can be reset with the \"Reset Filter\" button.</li>\n                <p></p>\n                <li>\n                  The view of the map can be reset to the initial using the\n                  \"Reset View\" button\n                </li>\n              </ul>\n              <p>\n                Data courtesy of NYC TLS:\n                https://www1.nyc.gov/site/tlc/about/tlc-trip-record-data.page\n              </p>\n            </div>\n          </Fade>\n        </Modal>\n      </div>\n    </div>\n  );\n}\n","import React from \"react\";\nimport ReactMapGL from \"react-map-gl\";\nimport {\n  ArcLayer,\n  ColumnLayer,\n  DeckGL,\n  HexagonLayer,\n  ScatterplotLayer,\n  TripsLayer,\n} from \"deck.gl\";\nimport { DataFilterExtension, BrushingExtension } from \"@deck.gl/extensions\";\nimport { easeCubicInOut } from \"d3\";\nimport mapboxgl from \"mapbox-gl\"; // This is a dependency of react-map-gl even if you didn't explicitly install it\nimport Legend from \"./Legend\";\nimport { MAPBOX_TOKEN } from \"./keys\";\n\n// eslint-disable-next-line import/no-webpack-loader-syntax\nmapboxgl.workerClass = require(\"worker-loader!mapbox-gl/dist/mapbox-gl-csp-worker\").default;\n\nexport default function Map({\n  width,\n  height,\n  viewState,\n  onViewStateChange,\n  stations,\n  trips,\n  time_filter,\n  loading,\n  isPlaying,\n  setHighlight,\n  resetFilter,\n  resetView,\n}) {\n  const initCounters = () => {\n    const zeros = {};\n    stations.forEach((s) => {\n      zeros[s.id] = 0;\n    });\n    return zeros;\n  };\n\n  const filterChange = () => {\n    const update = initCounters();\n    let highlightCounter = 0;\n    // const update = initCounters();\n    trips.forEach((element) => {\n      if (\n        element.start_minutes >= time_filter[0] &&\n        element.start_minutes <= time_filter[1]\n      ) {\n        highlightCounter += 1;\n        if (selectedStation === undefined) {\n          // get net flow if nothing is selected\n          update[element.end_id] += 1;\n          update[element.start_id] -= 1;\n        } else {\n          //  get net flow with respect to selected station\n          if (\n            element.start_id === selectedStation ||\n            element.end_id === selectedStation\n          ) {\n            update[element.start_id] -= 1;\n            update[element.end_id] += 1;\n          }\n        }\n      }\n    });\n    // console.log(update);\n    // if (init) setChange(change + 1);\n    update[\"highlight\"] = highlightCounter;\n    return update;\n  };\n\n  const filterTrips = () => {\n    const newTrips = trips.filter((element) => {\n      return (\n        element.start_minutes >= time_filter[0] &&\n        element.start_minutes <= time_filter[1]\n      );\n    });\n    return newTrips;\n  };\n\n  const brushingExtension = new BrushingExtension();\n\n  const red = [255, 0, 0];\n  const light_red = [255, 0, 0, 50];\n  const green = [0, 255, 0];\n  const light_green = [0, 255, 0, 50];\n\n  const neutral = [255, 0, 0, 70];\n\n  const [selectedStation, setSelectedStation] = React.useState(undefined);\n  const [counters, setCounters] = React.useState(initCounters());\n  const [highlightCount, setHighlightCount] = React.useState(0);\n  const [filteredTrips, setFilteredTrips] = React.useState(filterTrips());\n\n  const [brushing, setBrushing] = React.useState(false);\n  const [brushRadius, setBrushRadius] = React.useState(100);\n  const [aggregate, setAggregate] = React.useState(false);\n  const [pickupAgg, setpickupAgg] = React.useState(true);\n  const [arcType, setArcType] = React.useState(\"source\");\n\n  // React.useEffect(() => {\n  //   const res = filterChange();\n  //   console.log();\n  //   setCounters(res);\n  //   setHighlightCount(res[\"highlight\"]);\n  // }, [selectedStation, loading, time_filter]);\n\n  React.useEffect(() => {\n    setFilteredTrips(filterTrips());\n  }, [time_filter, loading]);\n\n  function getTooltip({ object }) {\n    if (!object) {\n      return null;\n    }\n    // console.log(object);\n\n    if (pickupAgg) {\n      const lat = object.position[1];\n      const lng = object.position[0];\n      const count = object.points.length;\n      return (\n        object &&\n        `\\\n        Hexbin LatLng: ${[lat, lng]}\n        Number of taxi pickups: ${count}`\n      );\n    } else {\n      const lat = object.position[1];\n      const lng = object.position[0];\n      const count = object.points.length;\n      return (\n        object &&\n        `\\\n        Hexbin LatLng: ${[lat, lng]}\n        Number of taxi dropoffs: ${count}`\n      );\n    }\n    return null;\n  }\n\n  const layers = [\n    new HexagonLayer({\n      id: \"pickup-agg\",\n      data: filteredTrips,\n      elevationRange: [0, 3000],\n      elevationScale: 1,\n      extruded: true,\n      opacity: 0.7,\n      visible: aggregate && pickupAgg,\n      radius: 100,\n      coverage: 0.7,\n      pickable: true,\n      getPosition: (d) => d.start_position,\n      autoHighlight: true,\n    }),\n    new HexagonLayer({\n      id: \"dropoff-agg\",\n      data: filteredTrips,\n      elevationRange: [0, 3000],\n      elevationScale: trips && trips.length ? 1 : 0,\n      extruded: true,\n      opacity: 0.7,\n      visible: aggregate && !pickupAgg,\n      radius: 100,\n      coverage: 0.7,\n      pickable: true,\n      autoHighlight: true,\n      getPosition: (d) => d.end_position,\n    }),\n    new ScatterplotLayer({\n      id: \"pickup\",\n      data: filteredTrips,\n      getPosition: (d) => d.start_position,\n      getFillColor: light_green,\n      visible: !aggregate,\n      getRadius: 5,\n    }),\n    new ScatterplotLayer({\n      id: \"dropoff\",\n      data: filteredTrips,\n      getPosition: (d) => d.end_position,\n      getFillColor: light_red,\n      visible: !aggregate,\n      getRadius: 5,\n    }),\n    new ScatterplotLayer({\n      id: \"pickup-brushed\",\n      data: filteredTrips,\n      getPosition: (d) => d.start_position,\n      getFillColor: green,\n      getRadius: 5,\n      brushingRadius: brushRadius,\n      brushingEnabled: brushing,\n      visible: !aggregate,\n      extensions: [brushingExtension],\n    }),\n    new ScatterplotLayer({\n      id: \"dropoff-brushed\",\n      data: filteredTrips,\n      getPosition: (d) => d.end_position,\n      getFillColor: red,\n      getRadius: 5,\n      brushingRadius: brushRadius,\n      brushingEnabled: brushing,\n      visible: !aggregate,\n      extensions: [brushingExtension],\n    }),\n    new ArcLayer({\n      id: \"arc-layer\",\n      data: filteredTrips,\n      getSourcePosition: (d) => d.start_position,\n      getTargetPosition: (d) => d.end_position,\n      getSourceColor: (d) => {\n        return green;\n      },\n      getTargetColor: (d) => {\n        return red;\n      },\n      visible: true,\n      opacity: 0.2,\n      updateTriggers: {\n        getSourceColor: [time_filter],\n        getTargetColor: [time_filter],\n      },\n      brushingRadius: brushRadius,\n      brushingEnabled: brushing,\n      visible: brushing && !aggregate,\n      brushingTarget: arcType,\n      extensions: [brushingExtension],\n    }),\n  ];\n\n  return (\n    <div>\n      <Legend\n        counts={highlightCount}\n        resetFilter={resetFilter}\n        resetView={resetView}\n        brushing={brushing}\n        setBrushing={setBrushing}\n        aggregate={aggregate}\n        setAggregate={setAggregate}\n        brushRadius={brushRadius}\n        setBrushRadius={setBrushRadius}\n        pickupAgg={pickupAgg}\n        setPickupAgg={setpickupAgg}\n        arcType={arcType}\n        setArcType={setArcType}\n      />\n      <ReactMapGL\n        mapboxApiAccessToken={MAPBOX_TOKEN}\n        width={width}\n        height={height}\n        viewState={viewState}\n        onViewStateChange={onViewStateChange}\n        mapStyle=\"mapbox://styles/mapbox/dark-v9\"\n      >\n        <DeckGL viewState={viewState} layers={layers} getTooltip={getTooltip} />\n      </ReactMapGL>\n    </div>\n  );\n}\n","// please be nice and don't misuse this token. Thanks\nexport const MAPBOX_TOKEN =\n  \"pk.eyJ1IjoianpoYW5nNTYiLCJhIjoiY2tuMXhmNG44MTI1MzJ2bW9rbWhjNTM4YSJ9.Oukq6B1n9DOXpjfRZfUOJQ\";\n\nexport const SUBWAY_TOKEN = \"1tlYc08Y7bazXsrjXOLWPa1BotmO3QQe2FEXlfPb\";\n\nexport const BUS_TOKEN = \"3c79e0ce-8ab9-4a2e-becb-8f7b22d4ccc8\";\n","// converted from stations.json\nexport const station_info = {\n  3186: {\n    name: \"Grove St PATH\",\n    latitude: 40.71958611647166,\n    longitude: -74.0431174635887,\n  },\n  3195: {\n    name: \"Sip Ave\",\n    latitude: 40.73089709786179,\n    longitude: -74.06391263008119,\n  },\n  3199: {\n    name: \"Newport Pkwy\",\n    latitude: 40.728744799999994,\n    longitude: -74.03210820000001,\n  },\n  3792: {\n    name: \"Columbus Dr at Exchange Pl\",\n    latitude: 40.71687,\n    longitude: -74.03281,\n  },\n  3185: {\n    name: \"City Hall\",\n    latitude: 40.717732500000004,\n    longitude: -74.04384499999999,\n  },\n  3275: {\n    name: \"Columbus Drive\",\n    latitude: 40.71835519823214,\n    longitude: -74.03891444206238,\n  },\n  3639: {\n    name: \"Harborside\",\n    latitude: 40.71925170000001,\n    longitude: -74.034234,\n  },\n  3276: {\n    name: \"Marin Light Rail\",\n    latitude: 40.71458403535893,\n    longitude: -74.04281705617905,\n  },\n  3202: {\n    name: \"Newport PATH\",\n    latitude: 40.7272235,\n    longitude: -74.03375890000001,\n  },\n  3211: { name: \"Newark Ave\", latitude: 40.72152515, longitude: -74.046304543 },\n  3213: {\n    name: \"Van Vorst Park\",\n    latitude: 40.71848892,\n    longitude: -74.047726625,\n  },\n  3640: {\n    name: \"Journal Square\",\n    latitude: 40.733670000000004,\n    longitude: -74.0625,\n  },\n  3187: {\n    name: \"Warren St\",\n    latitude: 40.721123600000006,\n    longitude: -74.03805095,\n  },\n  3203: {\n    name: \"Hamilton Park\",\n    latitude: 40.727595965999996,\n    longitude: -74.044247311,\n  },\n  3207: {\n    name: \"Oakland Ave\",\n    latitude: 40.7376037,\n    longitude: -74.05247829999999,\n  },\n  3678: {\n    name: \"Fairmount Ave\",\n    latitude: 40.72572613742557,\n    longitude: -74.07195925712584,\n  },\n  3194: {\n    name: \"McGinley Square\",\n    latitude: 40.7253399253558,\n    longitude: -74.06762212514876,\n  },\n  3206: { name: \"Hilltop\", latitude: 40.7311689, longitude: -74.0575736 },\n  3225: {\n    name: \"Baldwin at Montgomery\",\n    latitude: 40.7236589,\n    longitude: -74.0641943,\n  },\n  3220: {\n    name: \"5 Corners Library\",\n    latitude: 40.73496102000952,\n    longitude: -74.05950307846071,\n  },\n  3196: {\n    name: \"Riverview Park\",\n    latitude: 40.7443187,\n    longitude: -74.04399090000001,\n  },\n  3272: {\n    name: \"Jersey & 3rd\",\n    latitude: 40.723331586464354,\n    longitude: -74.04595255851744,\n  },\n  3269: {\n    name: \"Brunswick & 6th\",\n    latitude: 40.726011729646245,\n    longitude: -74.0503889322281,\n  },\n  3638: { name: \"Washington St\", latitude: 40.7242941, longitude: -74.0354826 },\n  3278: {\n    name: \"Monmouth and 6th\",\n    latitude: 40.72568548362901,\n    longitude: -74.0487903356552,\n  },\n  3273: {\n    name: \"Manila & 1st\",\n    latitude: 40.72165072487999,\n    longitude: -74.04288411140442,\n  },\n  3279: {\n    name: \"Dixon Mills\",\n    latitude: 40.72163014263835,\n    longitude: -74.04996782541275,\n  },\n  3270: {\n    name: \"Jersey & 6th St\",\n    latitude: 40.72528910781132,\n    longitude: -74.04557168483734,\n  },\n  3205: {\n    name: \"JC Medical Center\",\n    latitude: 40.71653978099194,\n    longitude: -74.0496379137039,\n  },\n  3209: {\n    name: \"Brunswick St\",\n    latitude: 40.7241765,\n    longitude: -74.05065640000001,\n  },\n  3267: {\n    name: \"Morris Canal\",\n    latitude: 40.7124188237569,\n    longitude: -74.03852552175522,\n  },\n  3212: {\n    name: \"Christ Hospital\",\n    latitude: 40.734785818,\n    longitude: -74.050443636,\n  },\n  3184: { name: \"Paulus Hook\", latitude: 40.7141454, longitude: -74.0335519 },\n  3681: {\n    name: \"Grand St\",\n    latitude: 40.71517767732029,\n    longitude: -74.03768330812454,\n  },\n  3679: {\n    name: \"Bergen Ave\",\n    latitude: 40.72210378668603,\n    longitude: -74.07145500183104,\n  },\n  3483: { name: \"Montgomery St\", latitude: 40.71942, longitude: -74.05099 },\n  3280: {\n    name: \"Astor Place\",\n    latitude: 40.71928220070703,\n    longitude: -74.07126188278198,\n  },\n  3214: {\n    name: \"Essex Light Rail\",\n    latitude: 40.712774200000005,\n    longitude: -74.03648570000001,\n  },\n  3791: {\n    name: \"Hoboken Ave at Monmouth St\",\n    latitude: 40.73520838045357,\n    longitude: -74.04696375131606,\n  },\n  3481: { name: \"York St\", latitude: 40.71649, longitude: -74.04105 },\n  3193: {\n    name: \"Lincoln Park\",\n    latitude: 40.7246050998869,\n    longitude: -74.07840594649316,\n  },\n  3677: {\n    name: \"Glenwood Ave\",\n    latitude: 40.72755146730012,\n    longitude: -74.07106071710588,\n  },\n  3268: {\n    name: \"Lafayette Park\",\n    latitude: 40.71346382669195,\n    longitude: -74.06285852193831,\n  },\n  3281: {\n    name: \"Leonard Gordon Park\",\n    latitude: 40.74590996631558,\n    longitude: -74.05727148056029,\n  },\n  3210: {\n    name: \"Pershing Field\",\n    latitude: 40.742677141,\n    longitude: -74.051788633,\n  },\n  3201: { name: \"Dey St\", latitude: 40.737711, longitude: -74.066921 },\n  3694: { name: \"Jackson Square\", latitude: 40.71113, longitude: -74.0789 },\n  3192: {\n    name: \"Liberty Light Rail\",\n    latitude: 40.711242299999995,\n    longitude: -74.0557013,\n  },\n  3198: {\n    name: \"Heights Elevator\",\n    latitude: 40.748715945380226,\n    longitude: -74.04044330120088,\n  },\n  3277: {\n    name: \"Communipaw & Berry Lane\",\n    latitude: 40.71435836870427,\n    longitude: -74.06661093235016,\n  },\n  3191: {\n    name: \"Union St\",\n    latitude: 40.71821129999999,\n    longitude: -74.08363940000001,\n  },\n  3426: {\n    name: \"JCBS Depot\",\n    latitude: 40.70965083364061,\n    longitude: -74.06860113143921,\n  },\n};\n","export const list_stations = [\n  {\n    name: \"Grove St PATH\",\n    latitude: 40.71958611647166,\n    longitude: -74.0431174635887,\n    id: 3186,\n  },\n  {\n    name: \"Sip Ave\",\n    latitude: 40.73089709786179,\n    longitude: -74.06391263008119,\n    id: 3195,\n  },\n  {\n    name: \"Newport Pkwy\",\n    latitude: 40.728744799999994,\n    longitude: -74.03210820000001,\n    id: 3199,\n  },\n  {\n    name: \"Columbus Dr at Exchange Pl\",\n    latitude: 40.71687,\n    longitude: -74.03281,\n    id: 3792,\n  },\n  {\n    name: \"City Hall\",\n    latitude: 40.717732500000004,\n    longitude: -74.04384499999999,\n    id: 3185,\n  },\n  {\n    name: \"Columbus Drive\",\n    latitude: 40.71835519823214,\n    longitude: -74.03891444206238,\n    id: 3275,\n  },\n  {\n    name: \"Harborside\",\n    latitude: 40.71925170000001,\n    longitude: -74.034234,\n    id: 3639,\n  },\n  {\n    name: \"Marin Light Rail\",\n    latitude: 40.71458403535893,\n    longitude: -74.04281705617905,\n    id: 3276,\n  },\n  {\n    name: \"Newport PATH\",\n    latitude: 40.7272235,\n    longitude: -74.03375890000001,\n    id: 3202,\n  },\n  {\n    name: \"Newark Ave\",\n    latitude: 40.72152515,\n    longitude: -74.046304543,\n    id: 3211,\n  },\n  {\n    name: \"Van Vorst Park\",\n    latitude: 40.71848892,\n    longitude: -74.047726625,\n    id: 3213,\n  },\n  {\n    name: \"Journal Square\",\n    latitude: 40.733670000000004,\n    longitude: -74.0625,\n    id: 3640,\n  },\n  {\n    name: \"Warren St\",\n    latitude: 40.721123600000006,\n    longitude: -74.03805095,\n    id: 3187,\n  },\n  {\n    name: \"Hamilton Park\",\n    latitude: 40.727595965999996,\n    longitude: -74.044247311,\n    id: 3203,\n  },\n  {\n    name: \"Oakland Ave\",\n    latitude: 40.7376037,\n    longitude: -74.05247829999999,\n    id: 3207,\n  },\n  {\n    name: \"Fairmount Ave\",\n    latitude: 40.72572613742557,\n    longitude: -74.07195925712584,\n    id: 3678,\n  },\n  {\n    name: \"McGinley Square\",\n    latitude: 40.7253399253558,\n    longitude: -74.06762212514876,\n    id: 3194,\n  },\n  { name: \"Hilltop\", latitude: 40.7311689, longitude: -74.0575736, id: 3206 },\n  {\n    name: \"Baldwin at Montgomery\",\n    latitude: 40.7236589,\n    longitude: -74.0641943,\n    id: 3225,\n  },\n  {\n    name: \"5 Corners Library\",\n    latitude: 40.73496102000952,\n    longitude: -74.05950307846071,\n    id: 3220,\n  },\n  {\n    name: \"Riverview Park\",\n    latitude: 40.7443187,\n    longitude: -74.04399090000001,\n    id: 3196,\n  },\n  {\n    name: \"Jersey & 3rd\",\n    latitude: 40.723331586464354,\n    longitude: -74.04595255851744,\n    id: 3272,\n  },\n  {\n    name: \"Brunswick & 6th\",\n    latitude: 40.726011729646245,\n    longitude: -74.0503889322281,\n    id: 3269,\n  },\n  {\n    name: \"Washington St\",\n    latitude: 40.7242941,\n    longitude: -74.0354826,\n    id: 3638,\n  },\n  {\n    name: \"Monmouth and 6th\",\n    latitude: 40.72568548362901,\n    longitude: -74.0487903356552,\n    id: 3278,\n  },\n  {\n    name: \"Manila & 1st\",\n    latitude: 40.72165072487999,\n    longitude: -74.04288411140442,\n    id: 3273,\n  },\n  {\n    name: \"Dixon Mills\",\n    latitude: 40.72163014263835,\n    longitude: -74.04996782541275,\n    id: 3279,\n  },\n  {\n    name: \"Jersey & 6th St\",\n    latitude: 40.72528910781132,\n    longitude: -74.04557168483734,\n    id: 3270,\n  },\n  {\n    name: \"JC Medical Center\",\n    latitude: 40.71653978099194,\n    longitude: -74.0496379137039,\n    id: 3205,\n  },\n  {\n    name: \"Brunswick St\",\n    latitude: 40.7241765,\n    longitude: -74.05065640000001,\n    id: 3209,\n  },\n  {\n    name: \"Morris Canal\",\n    latitude: 40.7124188237569,\n    longitude: -74.03852552175522,\n    id: 3267,\n  },\n  {\n    name: \"Christ Hospital\",\n    latitude: 40.734785818,\n    longitude: -74.050443636,\n    id: 3212,\n  },\n  {\n    name: \"Paulus Hook\",\n    latitude: 40.7141454,\n    longitude: -74.0335519,\n    id: 3184,\n  },\n  {\n    name: \"Grand St\",\n    latitude: 40.71517767732029,\n    longitude: -74.03768330812454,\n    id: 3681,\n  },\n  {\n    name: \"Bergen Ave\",\n    latitude: 40.72210378668603,\n    longitude: -74.07145500183104,\n    id: 3679,\n  },\n  { name: \"Montgomery St\", latitude: 40.71942, longitude: -74.05099, id: 3483 },\n  {\n    name: \"Astor Place\",\n    latitude: 40.71928220070703,\n    longitude: -74.07126188278198,\n    id: 3280,\n  },\n  {\n    name: \"Essex Light Rail\",\n    latitude: 40.712774200000005,\n    longitude: -74.03648570000001,\n    id: 3214,\n  },\n  {\n    name: \"Hoboken Ave at Monmouth St\",\n    latitude: 40.73520838045357,\n    longitude: -74.04696375131606,\n    id: 3791,\n  },\n  { name: \"York St\", latitude: 40.71649, longitude: -74.04105, id: 3481 },\n  {\n    name: \"Lincoln Park\",\n    latitude: 40.7246050998869,\n    longitude: -74.07840594649316,\n    id: 3193,\n  },\n  {\n    name: \"Glenwood Ave\",\n    latitude: 40.72755146730012,\n    longitude: -74.07106071710588,\n    id: 3677,\n  },\n  {\n    name: \"Lafayette Park\",\n    latitude: 40.71346382669195,\n    longitude: -74.06285852193831,\n    id: 3268,\n  },\n  {\n    name: \"Leonard Gordon Park\",\n    latitude: 40.74590996631558,\n    longitude: -74.05727148056029,\n    id: 3281,\n  },\n  {\n    name: \"Pershing Field\",\n    latitude: 40.742677141,\n    longitude: -74.051788633,\n    id: 3210,\n  },\n  { name: \"Dey St\", latitude: 40.737711, longitude: -74.066921, id: 3201 },\n  { name: \"Jackson Square\", latitude: 40.71113, longitude: -74.0789, id: 3694 },\n  {\n    name: \"Liberty Light Rail\",\n    latitude: 40.711242299999995,\n    longitude: -74.0557013,\n    id: 3192,\n  },\n  {\n    name: \"Heights Elevator\",\n    latitude: 40.748715945380226,\n    longitude: -74.04044330120088,\n    id: 3198,\n  },\n  {\n    name: \"Communipaw & Berry Lane\",\n    latitude: 40.71435836870427,\n    longitude: -74.06661093235016,\n    id: 3277,\n  },\n  {\n    name: \"Union St\",\n    latitude: 40.71821129999999,\n    longitude: -74.08363940000001,\n    id: 3191,\n  },\n  {\n    name: \"JCBS Depot\",\n    latitude: 40.70965083364061,\n    longitude: -74.06860113143921,\n    id: 3426,\n  },\n];\n","export default __webpack_public_path__ + \"static/media/taxis.ac20a2fd.csv\";","import React, { useState, useEffect } from \"react\";\nimport { styled, withStyles } from \"@material-ui/core/styles\";\nimport Slider from \"@material-ui/core/Slider\";\nimport Button from \"@material-ui/core/IconButton\";\nimport Lock from \"@material-ui/icons/Lock\";\nimport LockOpen from \"@material-ui/icons/LockOpen\";\nimport Typography from \"@material-ui/core/Typography\";\n\nconst PositionContainer = styled(\"div\")({\n  position: \"absolute\",\n  zIndex: 1,\n  bottom: \"40px\",\n  width: \"100%\",\n  display: \"flex\",\n  justifyContent: \"center\",\n  alignItems: \"center\",\n});\n\nconst CenterContainer = styled(\"div\")({\n  position: \"\",\n  zIndex: 1,\n  // bottom: \"40px\",\n  height: \"120%\",\n  width: \"60%\",\n  display: \"flex\",\n  justifyContent: \"center\",\n  alignItems: \"center\",\n  background: \"rgb(48,48,48)\",\n  borderRadius: \"10px\",\n});\n\nconst SliderInput = withStyles({\n  root: {\n    marginLeft: 12,\n    width: \"80%\",\n  },\n  valueLabel: {\n    \"& span\": {\n      background: \"rgb(75,75,75)\",\n      color: \"#ffffff\",\n    },\n  },\n})(Slider);\n\nexport default function RangeInput({ min, max, value, onChange, formatLabel }) {\n  const [lock, setLock] = useState(true);\n  const [span, setSpan] = useState(value[1] - value[0]);\n\n  useEffect(() => {\n    setSpan(value[1] - value[0]);\n  }, value);\n\n  const localOnChange = (newValue) => {\n    let updateValue = [value[0], value[1]];\n    if (lock) {\n      if (newValue[1] === updateValue[1]) {\n        updateValue = [newValue[0], newValue[0] + span];\n      } else {\n        updateValue = [newValue[1] - span, newValue[1]];\n      }\n      if (updateValue[0] < min) {\n        updateValue = [min, min + span];\n      }\n      if (updateValue[1] > max) {\n        updateValue = [max - span, max];\n      }\n      onChange(updateValue);\n    } else {\n      onChange(newValue);\n    }\n  };\n\n  return (\n    <PositionContainer>\n      <CenterContainer>\n        <Typography id=\"time-filter\" color=\"secondary\">\n          Time Filter\n        </Typography>\n\n        <SliderInput\n          color=\"secondary\"\n          min={min}\n          max={max}\n          value={value}\n          aria-labelledby=\"time-filter\"\n          onChange={(event, newValue) => localOnChange(newValue)}\n          valueLabelDisplay=\"on\"\n          valueLabelFormat={formatLabel}\n        />\n\n        <Button\n          color=\"secondary\"\n          onClick={() => {\n            setLock(!lock);\n            setSpan(value[1] - value[0]);\n          }}\n        >\n          {lock ? (\n            <Lock title=\"Lock Time Filter\" />\n          ) : (\n            <LockOpen title=\"Open Time Filter\" />\n          )}\n        </Button>\n      </CenterContainer>\n    </PositionContainer>\n  );\n}\n","import React from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Modal from \"@material-ui/core/Modal\";\nimport Backdrop from \"@material-ui/core/Backdrop\";\nimport Fade from \"@material-ui/core/Fade\";\nimport { CircularProgress } from \"@material-ui/core\";\nimport Done from \"@material-ui/icons/Done\";\n\nconst useStyles = makeStyles((theme) => ({\n  modal: {\n    display: \"flex\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n  },\n  paper: {\n    color: \"#dddddd\",\n    background: \"rgb(48,48,48)\",\n    border: \"0px solid #000\",\n    padding: theme.spacing(2, 4, 3),\n  },\n}));\n\nexport default function WelcomeModal({ loading }) {\n  const classes = useStyles();\n  const [open, setOpen] = React.useState(true);\n\n  const handleClose = () => {\n    if (loading) return;\n    setOpen(false);\n  };\n\n  return (\n    <div>\n      <Modal\n        aria-labelledby=\"transition-modal-title\"\n        aria-describedby=\"transition-modal-description\"\n        className={classes.modal}\n        open={open}\n        onClose={handleClose}\n        closeAfterTransition\n        BackdropComponent={Backdrop}\n        BackdropProps={{\n          timeout: 500,\n        }}\n      >\n        <Fade in={open}>\n          <div className={classes.paper}>\n            <h2 id=\"transition-modal-title\">NYC Taxi Trips during COVID</h2>\n            <p id=\"transition-modal-description\">\n              The COVID pandemic led to lockdowns and the reduction of travels.\n            </p>\n            <p>A city that was hit espectially hard was NYC.</p>\n            <p>\n              Let's explore how the first few months of the pandemic (March -\n              June 2020) changed how people used taxis in NYC.\n            </p>\n            <p>\n              Data courtesy of NYC TLS:\n              https://www1.nyc.gov/site/tlc/about/tlc-trip-record-data.page\n            </p>\n\n            {loading ? (\n              <div>\n                The data is loading, please wait. <CircularProgress />\n              </div>\n            ) : (\n              <div>\n                <p>\n                  Loading complete. Click outside to continue <Done />\n                </p>\n              </div>\n            )}\n          </div>\n        </Fade>\n      </Modal>\n    </div>\n  );\n}\n","import { React, Component } from \"react\";\nimport { FlyToInterpolator } from \"react-map-gl\";\nimport Map from \"./Map\";\nimport { station_info } from \"../stations\";\nimport { list_stations } from \"../list_stations\";\nimport { csv } from \"d3\";\nimport trip_data from \"./taxis.csv\";\nimport RangeInput from \"./RangeInput\";\nimport WelcomeModal from \"./WelcomeModal\";\n\nconst nyc = {\n  longitude: -74,\n  latitude: 40.72,\n  zoom: 13.5,\n  pitch: 45,\n  bearing: 0\n};\n\nconst jc = {\n  latitude: 40.725779443680345,\n  longitude: -74.05589375312678,\n  zoom: 13,\n  bearing: 0.8015740858150702,\n  pitch: 40.9,\n};\n\nclass MapWrapper extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      viewState: nyc,\n      station_info: station_info,\n      stations: list_stations,\n      trips: [],\n      loading: true,\n      time_filter: [600, 780],\n      playing: false,\n      highlightStation: undefined,\n      highlightCount: 0,\n    };\n  }\n\n  setViewState = (viewState) => {\n    this.setState({ viewState });\n  };\n\n  setFilter = (filter) => {\n    this.setState({\n      time_filter: filter,\n    });\n  };\n\n  resetFilter = () => {\n    this.setState({\n      time_filter: [600, 780],\n    });\n  };\n\n  resetView = () => {\n    this.handleFlyTo(nyc);\n  };\n\n  setHighlight = (name, count) => {\n    this.setState({\n      highlightStation: name,\n      highlightCount: count,\n    });\n  };\n\n  formatLabel = (t) => {\n    const hour = (\"00\" + Math.floor(t / 60)).slice(-2);\n    const minutes = (\"00\" + (t % 60)).slice(-2);\n    return `${hour}:${minutes}`;\n  };\n\n  handleChangeViewState = ({ viewState }) => {\n    this.setViewState(viewState);\n  };\n\n  handleFlyTo = (destination) => {\n    this.setViewState({\n      ...this.state.viewState,\n      ...destination,\n      transitionDuration: 1500,\n      transitionInterpolator: new FlyToInterpolator(),\n    });\n  };\n\n  togglePlaying = () => {\n    this.setState({\n      playing: !this.state.playing,\n    });\n  };\n\n  componentDidMount() {\n    csv(trip_data, function (d) {\n      const pickup_time = new Date(d[\"tpep_pickup_datetime\"]);\n      const dropoff_time = new Date(d[\"tpep_dropoff_datetime\"]);\n      return {\n        taxi_type: +d['VendorID'],\n        duration: (dropoff_time - pickup_time)/60000, // this is in minutes\n        distance: +d[\"trip_distance\"],\n        // start_datetime: d[\"tpep_pickup_datetime\"],\n        passenger_count: +d[\"passenger_count\"],\n        start_time: pickup_time.toTimeString(),\n        start_minutes: pickup_time.getHours() * 60 + pickup_time.getMinutes(),\n        fare_amount: +d[\"fare_amount\"],\n        tip_amount: +d[\"tip_amount\"],\n        total_amount: +d[\"total_amount\"],\n        start_position: [+d[\"pickup_longitude\"], +d[\"pickup_latitude\"]],\n        end_position: [+d[\"dropoff_longitude\"], +d[\"dropoff_latitude\"]],\n      };\n    })\n      .then((data) => {\n        const start_cut = new Date(\"01-01-2020\");\n        const stop_cut = new Date(\"05-01-2020\");\n        // const filter_data = data.filter(\n        //   (d) =>\n        //     d.start_position[0] != null &&\n        //     d.start_position[1] != null &&\n        //     d.end_position[0] != null &&\n        //     d.end_position[1] != null &&\n        //     d.start_id in this.state.station_info &&\n        //     d.end_id in this.state.station_info &&\n        //     new Date(d.start_datetime) > start_cut &&\n        //     new Date(d.start_datetime) < stop_cut\n        // );\n        const filter_data = data;\n        this.setState({\n          trips: filter_data,\n          loading: false,\n        });\n        console.log(filter_data)\n      })\n      .then(() => {\n        this.handleFlyTo(nyc);\n      });\n  }\n\n  render() {\n    return (\n      <div>\n        <WelcomeModal loading={this.state.loading} />\n        <Map\n          width=\"100vw\"\n          height=\"100vh\"\n          viewState={this.state.viewState}\n          onViewStateChange={this.handleChangeViewState}\n          stations={this.state.stations}\n          trips={this.state.trips}\n          toggle={this.state.toggle}\n          time_filter={this.state.time_filter}\n          loading={this.state.loading}\n          isPlaying={this.state.playing}\n          resetFilter={this.resetFilter}\n          resetView={this.resetView}\n        ></Map>\n        <RangeInput\n          min={0}\n          max={1439}\n          value={this.state.time_filter}\n          animationSpeed={20}\n          formatLabel={this.formatLabel}\n          onChange={this.setFilter}\n          togglePlaying={this.togglePlaying}\n        />\n      </div>\n    );\n  }\n}\n\nexport default MapWrapper;\n","import React from 'react';\nimport './App.css';\n\nimport MapWrapper from './components/MapWrapper';\n\n\nconst App = () => {\n  return(\n    <MapWrapper/>\n  )\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}